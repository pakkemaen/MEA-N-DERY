@import url('https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@400;500;600;700&display=swap');

/* =========================================
   1. DESIGN TOKENS (MATERIAL 3 - MEAD THEME)
   ========================================= */
:root {
    /* --- COLOR PALETTE: HONEY & SLATE --- */
    
    /* LIGHT MODE */
    /* Primary (Honey/Amber - Prominent) */
    --md-sys-color-primary: 180 83 9;              /* amber-700 */
    --md-sys-color-on-primary: 255 255 255;        /* white */
    --md-sys-color-primary-container: 254 243 199; /* amber-100 */
    --md-sys-color-on-primary-container: 69 26 3;  /* amber-900 */

    /* Secondary (Herbal/Nature - Supporting) */
    --md-sys-color-secondary: 77 124 15;           /* lime-700 */
    --md-sys-color-on-secondary: 255 255 255;
    --md-sys-color-secondary-container: 236 252 203; /* lime-100 */
    --md-sys-color-on-secondary-container: 26 46 5;

    /* Tertiary (Slate/Neutral) */
    --md-sys-color-tertiary: 100 116 139;          /* slate-500 */
    --md-sys-color-tertiary-container: 241 245 249; /* slate-100 */

    /* Surface (Warm Off-Whites) */
    --md-sys-color-surface: 255 251 245;           /* Warm white (Mead foam) */
    --md-sys-color-on-surface: 28 25 23;           /* stone-900 (High contrast) */
    --md-sys-color-on-surface-variant: 68 64 60;   /* stone-700 (Subtext) */
    
    /* Surface Container (Cards) */
    --md-sys-color-surface-container: 255 255 255; /* white */
    --md-sys-color-surface-bright: 255 255 255;
    
    /* Outlines & Borders */
    --md-sys-color-outline: 120 113 108;           /* stone-500 */
    --md-sys-color-outline-variant: 214 211 209;   /* stone-200 */

    /* State & Status */
    --md-sys-color-error: 186 26 26;
    --md-sys-color-error-container: 255 218 214;
    
    /* Legacy Vars Mapped to MD3 (Voor compatibiliteit) */
    --brand-color: rgb(180, 83, 9);
    --text-primary: rgb(28, 25, 23);
    --bg-secondary: rgb(255, 255, 255);
}

.dark {
    /* DARK MODE (Deep Stone/Amber) */
    
    /* Primary (Lighter Gold) */
    --md-sys-color-primary: 251 191 36;            /* amber-400 */
    --md-sys-color-on-primary: 69 26 3;            /* amber-950 */
    --md-sys-color-primary-container: 146 64 14;   /* amber-800 */
    --md-sys-color-on-primary-container: 253 230 138;

    /* Secondary (Muted Green) */
    --md-sys-color-secondary: 163 230 53;          /* lime-400 */
    --md-sys-color-on-secondary: 26 46 5;
    --md-sys-color-secondary-container: 54 83 20;  /* lime-900 */
    --md-sys-color-on-secondary-container: 217 249 157;

    /* Surface (Deep Warm Grey - Not Black) */
    --md-sys-color-surface: 20 18 16;              /* Very dark warm grey */
    --md-sys-color-on-surface: 231 229 228;        /* stone-200 */
    --md-sys-color-on-surface-variant: 168 162 158; /* stone-400 */
    
    /* Surface Container (Cards - Slightly lighter than bg) */
    --md-sys-color-surface-container: 28 25 23;    /* stone-900 */
    --md-sys-color-surface-bright: 41 37 36;       /* stone-800 */

    /* Outlines */
    --md-sys-color-outline: 87 83 78;              /* stone-600 */
    --md-sys-color-outline-variant: 68 64 60;      /* stone-700 */

    /* Legacy Mapping */
    --brand-color: rgb(251, 191, 36);
    --text-primary: rgb(231, 229, 228);
    --bg-secondary: rgb(28, 25, 23);
}

/* =========================================
   2. GLOBAL RESETS & TYPOGRAPHY
   ========================================= */
body {
    background-color: rgb(var(--md-sys-color-surface));
    color: rgb(var(--md-sys-color-on-surface));
    font-family: 'Barlow Semi Condensed', sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
    line-height: 1.5;
    padding-bottom: env(safe-area-inset-bottom);
}

/* Headings MD3 Style */
h1, h2, h3, h4, .font-header {
    font-weight: 500; 
    letter-spacing: -0.01em;
    color: rgb(var(--md-sys-color-on-surface));
    font-family: 'Barlow Semi Condensed', sans-serif;
}

h1 { font-size: 3rem; line-height: 1.1; font-weight: 400; color: rgb(var(--md-sys-color-primary)); margin-bottom: 1rem; }
h2 { font-size: 1.75rem; border-bottom: none !important; margin-bottom: 1.5rem; }
h3 { font-size: 1.25rem; color: rgb(var(--md-sys-color-on-surface)); font-weight: 600; }

.text-app-secondary { color: rgb(var(--md-sys-color-on-surface-variant)) !important; }
.text-app-brand { color: rgb(var(--md-sys-color-primary)) !important; }

/* =========================================
   3. MODERN COMPONENT STYLES (MD3)
   ========================================= */

/* --- CARDS --- */
.card, .bg-app-secondary {
    background-color: rgb(var(--md-sys-color-surface-container));
    color: rgb(var(--md-sys-color-on-surface));
    border-radius: 20px; /* MD3 Roundness */
    border: none;
    box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.10); /* Elevation 1 */
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    overflow: hidden;
}

.card:hover {
    box-shadow: 0px 4px 8px 3px rgba(0, 0, 0, 0.10); /* Elevation 2 */
}

.dark .card {
    border: 1px solid rgb(var(--md-sys-color-outline-variant));
    box-shadow: none; /* Dark mode uses borders/overlay, not shadow */
}

/* --- BUTTONS --- */
.btn {
    border-radius: 9999px; /* Pill shape */
    height: 44px;
    padding: 0 24px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.85rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.2s ease;
    border: none;
    cursor: pointer;
}

.btn:active { transform: scale(0.98); }

/* Primary Actions */
.bg-app-action, .bg-blue-600, .bg-green-600, .bg-purple-600, .bg-amber-600 {
    background-color: rgb(var(--md-sys-color-primary)) !important;
    color: rgb(var(--md-sys-color-on-primary)) !important;
    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.12);
}

.bg-app-action:hover {
    filter: brightness(1.1);
    box-shadow: 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
}

/* Secondary/Ghost Buttons */
.bg-app-tertiary {
    background-color: transparent;
    border: 1px solid rgb(var(--md-sys-color-outline));
    color: rgb(var(--md-sys-color-primary));
}

.bg-app-tertiary:hover {
    background-color: rgb(var(--md-sys-color-primary-container));
    color: rgb(var(--md-sys-color-on-primary-container));
    border-color: transparent;
}

/* --- INPUTS (Outlined Text Fields) --- */
input[type="text"], input[type="number"], input[type="date"], 
input[type="password"], select, textarea {
    background-color: transparent !important;
    border: 1px solid rgb(var(--md-sys-color-outline));
    border-radius: 12px;
    padding: 14px 16px;
    color: rgb(var(--md-sys-color-on-surface));
    font-family: inherit;
    font-size: 1rem;
    width: 100%;
    transition: all 0.2s ease;
    box-shadow: none !important; /* Remove old shadows */
}

input:hover, select:hover, textarea:hover {
    border-color: rgb(var(--md-sys-color-on-surface));
}

input:focus, select:focus, textarea:focus {
    outline: none;
    border: 2px solid rgb(var(--md-sys-color-primary));
    background-color: rgb(var(--md-sys-color-surface-bright)) !important;
    padding: 13px 15px; /* Compensate for 2px border */
}

::placeholder {
    color: rgb(var(--md-sys-color-on-surface-variant));
    opacity: 0.6;
}

/* --- NAVIGATION TABS (Segmented Button Look) --- */
.sub-tab {
    border-radius: 9999px;
    padding: 8px 16px;
    font-weight: 600;
    color: rgb(var(--md-sys-color-on-surface-variant));
    border: 1px solid transparent;
    transition: all 0.2s;
    background: transparent;
    font-size: 0.9rem;
}

.sub-tab:hover {
    background-color: rgb(var(--md-sys-color-surface-variant) / 0.1);
}

.sub-tab.active {
    background-color: rgb(var(--md-sys-color-secondary-container));
    color: rgb(var(--md-sys-color-on-secondary-container));
    border: none;
}

/* =========================================
   4. APP SPECIFIC STYLES (PRESERVED & UPDATED)
   ========================================= */

/* --- TABLE STYLES --- */
table {
    border: 1px solid rgb(var(--md-sys-color-outline-variant));
    border-radius: 16px;
    overflow: hidden;
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
}
th {
    background-color: rgb(var(--md-sys-color-surface-container));
    color: rgb(var(--md-sys-color-on-surface));
    font-weight: 600;
    text-transform: capitalize;
    font-size: 0.85rem;
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid rgb(var(--md-sys-color-outline-variant));
}
td {
    padding: 12px 16px;
    border-bottom: 1px solid rgb(var(--md-sys-color-outline-variant));
    color: rgb(var(--md-sys-color-on-surface-variant));
    font-size: 0.95rem;
}
tr:last-child td { border-bottom: none; }

/* Table Inputs (Transparent) */
table input, table select {
    border: none !important;
    padding: 0 !important;
    height: auto !important;
    border-radius: 0 !important;
}
table input:focus {
    background: transparent !important;
    border-bottom: 2px solid rgb(var(--md-sys-color-primary)) !important;
}

/* --- RECIPE AI CONTENT --- */
.recipe-content { line-height: 1.7; font-size: 1.05rem; }

.recipe-content h1 {
    font-size: 2.5rem;
    color: rgb(var(--md-sys-color-primary));
    border-bottom: 2px solid rgb(var(--md-sys-color-outline-variant));
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
}

.recipe-content h2, .recipe-content h3 {
    color: rgb(var(--md-sys-color-primary));
    margin-top: 2rem;
    text-transform: uppercase;
}

.recipe-content blockquote {
    font-style: italic;
    color: rgb(var(--md-sys-color-secondary));
    border-left: 4px solid rgb(var(--md-sys-color-secondary));
    padding-left: 1rem;
    margin: 1.5rem 0;
    background: transparent;
}

/* Stats Badges in Recipe */
.recipe-content blockquote + ul {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 0.75rem;
    padding: 0 !important;
    list-style: none !important;
    background: transparent !important;
    border: none !important;
}

.recipe-content blockquote + ul li {
    background-color: rgb(var(--md-sys-color-surface-container));
    border: 1px solid rgb(var(--md-sys-color-outline-variant));
    border-radius: 12px;
    padding: 0.75rem !important;
    text-align: center;
    display: flex;
    flex-direction: column;
}

.recipe-content ul, .recipe-content ol {
    background-color: rgb(var(--md-sys-color-surface-container));
    border-radius: 16px;
    padding: 1.5rem 2rem;
    border: 1px solid rgb(var(--md-sys-color-outline-variant));
}

.recipe-content ol li::before {
    background-color: rgb(var(--md-sys-color-primary));
    color: rgb(var(--md-sys-color-on-primary));
}

/* --- LABEL CREATOR (PRESERVED) --- */
.vertical-text-group {
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    text-align: left;
    display: flex;
    gap: 12px;
    align-items: center;
}

.meandery-circle {
    width: 80px; height: 80px;
    border: 2px solid currentColor;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Barlow Semi Condensed', sans-serif;
    text-transform: uppercase;
    font-size: 11px;
}

#label-preview-container {
    transition: transform 0.3s ease;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
}

/* --- CUSTOM LOADER --- */
.honeycomb-loader { width: 50px; height: 50px; margin: 2rem auto; display: block; }
.honeycomb-path {
    fill: none;
    stroke: rgb(var(--md-sys-color-primary)); /* Updated to MD3 */
    stroke-width: 4;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: 210;
    stroke-dashoffset: 210;
    animation: drawHex 2s linear infinite;
}
@keyframes drawHex { 0% { stroke-dashoffset: 210; } 50% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -210; } }

/* --- UTILITIES --- */
.hidden { display: none !important; }
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Custom Scrollbar */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { 
    background-color: rgb(var(--md-sys-color-outline-variant)); 
    border-radius: 4px; 
}

/* Toggle Switch */
.theme-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
.theme-switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: rgb(var(--md-sys-color-outline)); transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: rgb(var(--md-sys-color-primary)); }
input:checked + .slider:before { transform: translateX(24px); }

/* --- PRINT RESET --- */
@media print {
    body { background: white; color: black; }
    .no-print, header, .back-to-dashboard-btn, nav { display: none !important; }
    #label-preview-container { transform: none !important; box-shadow: none !important; }
    main, .bg-app-secondary { border: none !important; box-shadow: none !important; }
}

/* Mobile Tweaks */
@media (max-width: 768px) {
    h1 { font-size: 2.5rem; }
    .card { border-radius: 16px; padding: 1rem !important; }
}

/* TOASTIFY MD3 OVERRIDE */
.toastify {
    background: rgb(var(--md-sys-color-on-surface)) !important;
    color: rgb(var(--md-sys-color-surface)) !important;
    border-radius: 8px !important; /* MD3 Snackbar radius is klein (4-8px) */
    box-shadow: 0px 4px 8px 3px rgba(0, 0, 0, 0.15) !important;
    font-family: 'Barlow Semi Condensed', sans-serif !important;
    font-weight: 500 !important;
    padding: 14px 24px !important;
    max-width: 90vw !important;
}

/* Success variant (Groen) */
.toastify.success {
    background: rgb(var(--md-sys-color-secondary-container)) !important;
    color: rgb(var(--md-sys-color-on-secondary-container)) !important;
}

/* Error variant (Rood) */
.toastify.error {
    background: rgb(var(--md-sys-color-error-container)) !important;
    color: rgb(var(--md-sys-color-error)) !important;
}